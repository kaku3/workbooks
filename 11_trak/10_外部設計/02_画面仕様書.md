# 画面仕様書

## メイン画面（SC201）

### 基本情報
- 画面ID：SC201
- 画面名：メイン画面
- URL：/

### 機能概要
チケット一覧をテーブルビューまたはガントチャートビューで表示し、チケットの管理を行う画面。

### 画面項目
#### ヘッダー部
1. ビュー切替タブ
   - テーブルビュー/ガントチャートの切り替えが可能
   - アクティブなタブはハイライト表示
   - キーボードショートカット：Alt + 1（テーブル）, Alt + 2（ガント）

2. 検索バー
   - チケット内容の全文検索
   - リアルタイム検索（300ms遅延）
   - ショートカット：Ctrl/Cmd + F でフォーカス

3. フィルター
   - ステータスフィルター：すべてのステータス、未着手、進行中、完了
   - 担当者フィルター：すべての担当者、個別担当者
   - フィルター適用時はアクティブ状態を視覚的に表示

4. 新規チケットボタン
   - クリックでチケット作成画面（SC301）に遷移
   - ショートカット：Ctrl/Cmd + N

#### テーブルビュー
- ソート可能なカラム
  - ID
  - タイトル
  - ステータス
  - 担当者
  - 期限
  - 見積

- カラム表示のカスタマイズ機能
  - カラムの表示/非表示を設定可能
  - 設定はローカルストレージに保存

- レスポンシブ対応（横スクロール）
  - 固定カラム：ID、タイトル
  - その他のカラムは横スクロール

#### ガントチャートビュー
- スケール切替（日/週/月）
- タイムライン表示
- レスポンシブ対応（最適化表示）
- ドラッグ＆ドロップで期間調整可能

## チケット作成/編集画面（SC301）

### 基本情報
- 画面ID：SC301
- 画面名：チケット作成/編集
- URL：/tickets/new（新規作成）, /tickets/[id]/edit（編集）

### 機能概要
チケットの作成・編集を行う画面。定型フォーマットの選択と必要事項の入力が可能。

### 使用コンポーネント
- Material-UI（@mui/material）
  - TextField: テキスト入力
  - Autocomplete: 担当者選択
  - Select: ステータス、テンプレート選択
  - FormControl: フォーム制御
- @uiw/react-md-editor: マークダウンエディタ

### 画面項目
#### 基本情報セクション
1. タイトル入力欄（必須）
   - TextField コンポーネント使用
   - フルワイドで表示
   - 最大文字数：100文字
   - バリデーション：空文字チェック

2. メタ情報エリア（横一列表示）
   - 担当者選択（必須）
     - Autocomplete コンポーネント使用
     - インクリメンタルサーチ（入力時即時フィルタリング）
     - 複数選択可能
     - users.jsonと連携
     - バリデーション：最低1名必須

   - ステータス選択（必須）
     - Select コンポーネント使用
     - statuses.jsonと連携
     - デフォルト値：Open
     - 選択肢：
       - Open：新規作成された状態
       - In Progress：作業中の状態
       - In Review：レビュー中の状態
       - Completed：作業が完了した状態
       - Close：完全に終了した状態
       - Blocked：進行が妨げられている状態
       - Waiting：他の作業を待っている状態

   - 期限設定
     - TextField type="date" 使用
     - 過去の日付も選択可能

   - 見積入力
     - TextField type="number" 使用
     - 数値入力（0.5単位）
     - 最小値：0

#### 内容セクション
1. テンプレート選択（必須）
   - Select コンポーネント使用
   - templates/フォルダ内のmdファイルと連携
   - ファイル名の_以降を表示（例：000_タスク.md → タスク）
   - 選択時に内容を自動反映
   - 現在利用可能なテンプレート：
     - タスク：基本的なタスク用テンプレート
     - 障害票：障害管理用テンプレート

2. 内容編集エリア
   - @uiw/react-md-editor使用
   - プレビュー機能：編集/プレビュー/分割表示
   - ツールバー：太字、斜体、リスト、リンクなど
   - バリデーション：空文字チェック

#### フッター部
- キャンセルボタン
  - メイン画面に戻る
  - 変更があった場合は確認ダイアログを表示
  - ショートカット：Esc

- 保存ボタン
  - 入力内容を保存
  - ショートカット：Ctrl/Cmd + S
  - 処理中は非活性（スピナー表示）

### バリデーション
- 必須チェック
  - タイトル
  - 担当者（最低1名）
  - ステータス
  - テンプレート
  - 内容

- 文字数チェック
  - タイトル：100文字以内

- 数値チェック
  - 見積：0以上、0.5単位

### エラー表示
- 各フィールド下部にエラーメッセージを表示
- 保存ボタン押下時に全体のバリデーションを実行
- エラーがある場合は該当項目までスクロール

### レスポンシブ対応
- メタ情報エリア
  - PC：横一列表示（4項目）
  - タブレット：2列表示（2x2）
  - スマートフォン：縦一列表示

- フォーム項目
  - 画面幅に合わせて最適化
  - 入力補助のポップアップは画面内に収まるよう調整

- ボタン
  - PC：横並び（右寄せ）
  - スマートフォン：縦並び（フルワイド）

### 操作性向上機能
- キーボードショートカット
  - 保存：Ctrl/Cmd + S
  - キャンセル：Esc
  - プレビュー切替：Ctrl/Cmd + P

- オートセーブ
  - 入力内容を5分おきに自動保存（ローカルストレージ）
  - ブラウザ再読み込み時に復元確認

- フォームナビゲーション
  - Tabキーで次の入力項目に移動
  - Shift + Tabで前の入力項目に移動
